# あなたの勘と経験は本当に合っていると断言できますか？　プロダクション環境での計測のススメ

## 非常時のみにプロファイルを取るということは
 - 性能に関する影響がわからないので取ることができない
 - 取得方法を知らないので対応が遅れる。
 - 状態回復の方が優先で即座に切り戻される
   再現できなくなる
 - 平常時のデータがないと非常時との差分がわからない

## なぜ本番環境でプロファイルするか
ワークロード特性を再現するのは手間がかかる
環境差分があることがある

## 性能について課題を感じていない

それは妥当な性能ですか？
妥当な性能かどうかは


## 誰のための性能?

 - 顧客の体験
   - ユーザー体験
     - レイテンシ
 - 私たちのための性能
   - リソース使用率
   

## どのように導入したか？

Google Cloud Profiler
 - オンプレOK
 - 無料で使える
 - pprof形式で出力可能なため


---
## Jacoco

本番で実行してどのコードが実行されたかレポート化

Javaで動いている全てのプロセスで動くため負荷がかかる
 パラメータで対象コードを限定させた。

ログ出力タイミングとガバレッジ取得タイミングが不一致


